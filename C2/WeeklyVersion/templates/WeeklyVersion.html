<!DOCTYPE html>
<html lang="en">
<script>
function AddRows(){
    var Table = document.getElementById("version_table");
    var Builds = {{builds|safe}};
    console.log(Builds);
    var TableRow="";
    for (var x=0;x<100;x++){
    for(i in Builds){
        TableRow=CreateRow(Builds[i]);
        Table.appendChild(TableRow);
    }
    }
}
function CreateRow(build){
    var Row=document.createElement('tr');
    Row.className = "row_data";
    var name =  CreateNameTD(build.name);
    var binary = CreateBinaryTD(build.binary);
    var debug_info = CreateDebugInfo(build.debug_info);
    var commit_history = CreateCommitHistory(build.commit_history);
    Row.appendChild(name)
    Row.appendChild(binary)
    Row.appendChild(debug_info)
    Row.appendChild(commit_history)
    return Row
}
function CreateNameTD(Name){
    var text_name=document.createTextNode(Name);
    var table_data=document.createElement('td');
    table_data.appendChild(text_name);
    return table_data
}
function CreateBinaryTD(Binary){
    var table_data=document.createElement('td');
    for(i in Binary){
        var bin = Binary[i];
        var name=bin[0];
        var path=bin[1];
        var hyperlink = CreateDownloadHref(name,path)
        table_data.appendChild(hyperlink);
        table_data.appendChild(document.createElement("br"));
    }
    return table_data
}
function CreateDownloadHref(Name,Path){
    var hyperlink = document.createElement('a');
    url="/Download?type=Daily&path="+Path
    hyperlink.href=url;
    hyperlink.onclick =function() {
        return confirm("是否确认下载?");
    };
    hyperlink.download ="";
    var text_name=document.createTextNode(Name);
    hyperlink.appendChild(text_name);
    return hyperlink
}
function CreateCommitHistoryHref(Path){
    var hyperlink = document.createElement('a');
    url="/CommitHistory?type=Daily&path="+Path
    hyperlink.href=url;
    var text_name=document.createTextNode("View");
    hyperlink.appendChild(text_name);
    return hyperlink
}
function CreateDebugInfo(DebugInfo){
    var table_data=document.createElement('td');
    for(i in DebugInfo){
        var info = DebugInfo[i];
        var name=info[0];
        var path=info[1];
        var hyperlink = CreateDownloadHref(name,path)
        table_data.appendChild(hyperlink);
        table_data.appendChild(document.createElement("br"));
    }
    return table_data
}
function CreateCommitHistory(CommitHistory){
    var table_data=document.createElement('td');
    if (CommitHistory != "None"){
        var hyperlink = CreateCommitHistoryHref(CommitHistory)
        table_data.appendChild(hyperlink);
    }
    return table_data
}
function Active(){
    var navi = document.getElementById("C2_WeeklyBuild");
    navi.className = "active";
}
window.onload=function(){
    AddRows();
    Active();
}

</script>
<style type="text/css">
</style>
<head>
    <meta charset="UTF-8">
    <link href="/static/css/youwu.css" rel="stylesheet" type="text/css">
    <title>感悟科技</title>
</head>
<body>
    <div>
        {% include "LogoTitle.html"%}
    </div>
    <div class="build_body">
        <div>
            {% include "NavigationBar.html"%}
        </div>
        <div class="build_table">
            <table class="altrowstable" id="version_table">
                <tr class="row_title">
                    <th>版本号/版本发布时间</th>
                    <th>软件下载</th>
                    <th>调试信息</th>
                    <th>提交记录</th>
                    <th>版本注释</th>
                    <th>测试报告</th>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>